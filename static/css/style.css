/* ==========================================================================
   Estilos Globais e Estrutura Base
   ========================================================================== 
   Este arquivo contém os estilos fundamentais que são aplicados em todo o 
   dashboard, garantindo uma aparência consistente entre as páginas.
*/

/* Define estilos padrão para o corpo (body) do documento. */
body {
    /* Define uma pilha de fontes modernas e seguras para o sistema. */
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    /* Remove a margem padrão do navegador. */
    margin: 0;
    /* Adiciona um preenchimento geral. */
    padding: 20px;
    /* Define uma cor de fundo suave para toda a página. */
    background-color: #f0f4f8;
    /* Define a cor padrão do texto. */
    color: #34495e;
}

/* Estiliza o contêiner principal que envolve o conteúdo de cada página. */
.container {
    /* Centraliza o contêiner na página. */
    margin: 20px auto;
    /* Adiciona preenchimento interno. */
    padding: 20px;
    /* Define o fundo como branco. */
    background-color: #ffffff;
    /* Arredonda as bordas do contêiner. */
    border-radius: 12px;
    /* Adiciona uma sombra sutil para um efeito de elevação. */
    box-shadow: 0 8px 25px rgba(0, 30, 80, 0.08);
    /* Adiciona uma transição suave para a propriedade max-width. */
    transition: max-width 0.5s ease-in-out;
}

/* ==========================================================================
   Indicador de Carregamento (Loading)
   ========================================================================== */

/* Estiliza a sobreposição (overlay) de carregamento que cobre a tela inteira. */
#loadingOverlay {
    /* Posicionamento fixo para cobrir toda a janela de visualização. */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Fundo semi-transparente. */
    background-color: rgba(240, 244, 248, 0.85);
    /* Usa Flexbox para centralizar o spinner de carregamento. */
    display: flex;
    justify-content: center;
    align-items: center;
    /* Garante que o overlay fique acima de todo o outro conteúdo. */
    z-index: 9999;
    /* Adiciona uma transição suave para o aparecimento/desaparecimento. */
    transition: opacity 0.3s ease-in-out;
}

/* Estiliza o spinner de carregamento (loader). */
.loader {
    /* Cria um círculo usando bordas. */
    border: 5px solid #eef2f7;
    /* A borda superior é colorida para criar o efeito de rotação. */
    border-top: 5px solid #5dade2;
    border-radius: 50%; /* Transforma o quadrado em círculo. */
    width: 50px;
    height: 50px;
    /* Aplica a animação 'spin' definida abaixo. */
    animation: spin 1s linear infinite;
}

/* Define a animação de rotação para o loader. */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ==========================================================================
   Títulos e Estado Vazio (Empty State)
   ========================================================================== */

/* Estilos padrão para os títulos principais (h1) e secundários (h2). */
h1, h2 {
    color: #1a3b5d;
    text-align: center;
}
h2 {
    margin-top: 40px;
    /* Adiciona uma linha sutil abaixo dos títulos de seção. */
    border-bottom: 2px solid #eef2f7;
    padding-bottom: 10px;
    font-weight: 600;
}

/* Estiliza o contêiner de "estado vazio", exibido quando não há dados. */
#emptyState {
    /* Escondido por padrão. Será exibido via JavaScript. */
    display: none;
    /* Usa Flexbox para centralizar o conteúdo vertical e horizontalmente. */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 70vh;
    text-align: center;
    color: #7f8c8d;
}
/* Estiliza a cor do ícone SVG dentro do estado vazio. */
#emptyState .icon svg path {
    stroke: #5dade2;
}
/* Remove a borda do título h2 especificamente no estado vazio. */
#emptyState h2 {
    color: #1a3b5d;
    border: none;
}

/* ==========================================================================
   Filtros
   ========================================================================== */

/* Estiliza a seção de filtros. */
.filtros {
    /* Usa Flexbox para alinhar os controles de filtro. */
    display: flex;
    /* Permite que os filtros quebrem para a linha seguinte em telas menores. */
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}
/* Estiliza os campos de data e texto nos filtros. */
.filtros input[type="date"], .filtros input[type="text"] {
    border: 1px solid #dce4ec;
    padding: 8px;
    border-radius: 6px;
}
/* Estiliza os botões nos filtros. */
.filtros button {
    background-color: #1a3b5d;
    color: white;
    border: none;
    padding: 9px 15px;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s ease;
}
/* Efeito hover para os botões. */
.filtros button:hover {
    background-color: #2c537e;
}
/* Estilo para botões desabilitados. */
.filtros button:disabled {
    background-color: #95a5a6;
    cursor: not-allowed;
}


/* ==========================================================================
   Estilos Comuns para Contêineres de Gráficos e Visualizações
   ========================================================================== */

/* Define uma base de estilos comum para todos os contêineres de visualização. */
.grafico-container-analise,
.grafico-container, 
.mapa-calor-container {
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden; 
}

/* Estilo específico para um contêiner de gráfico que ocupa a largura total. */
.grafico-container {
    min-height: 450px;
    /* Ocupa 12 colunas em um grid de 12 colunas. */
    grid-column: span 12;
}

/* Estilos para o elemento canvas (onde os gráficos são renderizados). */
.grafico-container-analise canvas,
.grafico-container canvas {
    /* Faz o canvas ser flexível e ocupar o espaço restante no contêiner. */
    flex: 1;
    /* Garante que o canvas seja responsivo e não ultrapasse o contêiner. */
    max-width: 100% !important;
    max-height: calc(100% - 60px) !important; /* Deixa espaço para o título */
    width: 100% !important;
    height: auto !important;
}


/* ==========================================================================
   Layout dos Cartões de Resumo e Responsividade
   ========================================================================== */

/* Define o layout em grade para o contêiner dos cartões de resumo. */
.resumo-container {
    display: grid;
    gap: 20px;
    margin: 25px 0;
}

/* Estilo base para cada cartão de resumo. */
.resumo-card { 
    background-color: #f8f9fa; 
    padding: 20px; 
    border-radius: 8px; 
    /* A cor da borda esquerda será definida por classes modificadoras. */
    border-left: 5px solid; 
    text-align: center; 
}

/* Layout inicial (mobile-first): uma coluna. */
.resumo-container {
    grid-template-columns: 1fr;
}
.resumo-card.totais,
.resumo-card.lucro {
    grid-column: auto;
}

/* Layout para telas maiores (tablets, a partir de 768px). */
@media (min-width: 768px) {
    .resumo-container {
        /* Cria uma grade com 6 colunas. */
        grid-template-columns: repeat(6, 1fr);
    }
    .resumo-container > .resumo-card {
        /* Cada cartão padrão ocupa 2 colunas. */
         grid-column: span 2;
    }
    .resumo-card.totais,
    .resumo-card.lucro {
        /* Os cartões especiais ocupam 3 colunas. */
        grid-column: span 3;
    }
}

/* Layout para telas bem largas (desktops, a partir de 1200px). */
@media (min-width: 1200px) {
    .resumo-container > .resumo-card {
        /* Cada cartão padrão ocupa 1 coluna, permitindo 6 cartões na linha. */
        grid-column: span 1;
    }
    .resumo-card.totais {
        /* Cartão de totais ocupa as 3 primeiras colunas. */
        grid-column: 1 / span 3;
    }
    .resumo-card.lucro {
        /* Cartão de lucro ocupa as 3 últimas colunas. */
        grid-column: 4 / span 3;
    }
}

/* Estilos para o texto dentro dos cartões de resumo. */
.resumo-card h4 {
    margin: 0 0 10px 0;
    color: #7f8c8d;
    font-size: 14px;
    text-transform: uppercase;
}
.resumo-card p {
    margin: 0;
    font-size: 24px;
    font-weight: bold;
    color: #1a3b5d;
}

/* Classes modificadoras para colorir a borda esquerda dos cartões de resumo. */
.resumo-card.custo { border-color: #e74c3c; } /* Vermelho */
.resumo-card.bruto { border-color: #f1c40f; } /* Amarelo */
.resumo-card.liquido { border-color: #2ecc71; } /* Verde */
.resumo-card.emitidas { border-color: #2ecc71; } /* Verde */
.resumo-card.excluidas { border-color: #e74c3c; } /* Vermelho */
.resumo-card.devolvidas { border-color: #f1c40f; } /* Amarelo */
.resumo-card.lucro { border-color: #0e42d1; } /* Azul */
.resumo-card.totais { border-color: #0e42d1; } /* Azul */


/* ==========================================================================
   Estilos de Tabela
   ========================================================================== */

/* Contêiner (wrapper) para tabelas, permitindo rolagem. */
.table-wrapper {
    max-height: 550px;
    overflow-y: auto; /* Rolagem vertical */
    overflow-x: auto; /* Rolagem horizontal */
}

/* Estilo base para todas as tabelas. */
table {
    width: 100%;
    border-collapse: collapse; /* Une as bordas das células. */
    margin-top: 20px;
}

/* Estilo para todas as células (cabeçalho e dados). */
th, td {
    border: 1px solid #dce4ec;
    padding: 10px;
    text-align: left;
    font-size: 13px;
    /* Impede a quebra de linha para manter a tabela alinhada. */
    white-space: nowrap;
}

/* Estilo específico para o cabeçalho da tabela (th). */
th {
    background-color: #2c537e;
    color: white;
    /* Faz o cabeçalho ficar fixo no topo durante a rolagem vertical. */
    position: sticky;
    top: 0;
    z-index: 1;
}

/* Estilos para tabelas aninhadas (internas). */
.tabela-interna {
    width: 98%;
    margin: 10px auto;
}
.tabela-interna th {
    background-color: #7f8c8d;
}

/* Cores alternadas para as linhas da tabela (efeito zebra). */
.linha-branca { background-color: #ffffff; }
.linha-cinza { background-color: #e7e8ffc0; }

/* Estilos para linhas clicáveis. */
.linha-venda { cursor: pointer; }
.linha-venda:hover td { text-decoration: underline; }
.nota-clicavel { color: #5dade2; font-weight: bold; text-decoration: none; }

/* Estilos para a funcionalidade de linha expansível. */
.linha-expandida > td,
.linha-expandida + .detalhes-produtos > td {
    /* Muda a cor de fundo para destacar a linha expandida e seus detalhes. */
    background-color: #eaf5fc !important;
}
/* Adiciona bordas coloridas ao redor do bloco expandido. */
.linha-expandida > td { border-top: 2px solid #5dade2; }
.linha-expandida + .detalhes-produtos > td { border-bottom: 2px solid #5dade2; }
.linha-expandida > td:first-child,
.linha-expandida + .detalhes-produtos > td { border-left: 2px solid #5dade2; }
.linha-expandida > td:last-child,
.linha-expandida + .detalhes-produtos > td { border-right: 2px solid #5dade2; }


/* Classes de status para colorir linhas da tabela com base em uma condição. */
.status-excluida > td {
    color: red !important;
}
.status-devolucao > td {
    background-color: #fff0f0 !important;
    color: #c0392b !important; 
    font-weight: bold !important; 
    border-top: 1.5px solid #e74c3c !important;
    border-bottom: 1.5px solid #e74c3c !important; 
}
.status-devolucao > td:first-child { border-left: 1.5px solid #e74c3c !important; }
.status-devolucao > td:last-child { border-right: 1.5px solid #e74c3c !important; }

.status-ok > td {
    color: black !important;
}

/* Estilo para colunas com dados numéricos. */
.col-numerica {
    text-align: right;
    font-weight: bold;
}

/* A linha que contém os detalhes de um produto começa escondida. */
.detalhes-produtos {
    display: none;
}
.detalhes-produtos td {
    padding: 0;
    border-bottom: 2px solid #5dade2;
}

/* Estiliza o rodapé (tfoot) da tabela, usado para totais. */
tfoot tr {
    background-color: #eef2f7;
    font-weight: bold;
    color: #1a3b5d;
}
tfoot td {
    border-top: 2px solid #5dade2;
}

/* ==========================================================================
   Paginação
   ========================================================================== */

/* Contêiner para os controles de paginação. */
.paginacao-container {
    padding: 15px 0;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
}

/* Estilo padrão para os botões de paginação. */
.paginacao-btn {
    border: 1px solid #dce4ec;
    background-color: #ffffff;
    color: #1a3b5d;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s ease, color 0.2s ease;
}

/* Efeito hover para os botões. */
.paginacao-btn:hover {
    background-color: #eef2f7;
}

/* Estilo para o botão da página ativa. */
.paginacao-btn.active {
    background-color: #1a3b5d;
    color: #ffffff;
    border-color: #1a3b5d;
}

/* Estilo para botões de paginação desabilitados (ex: "Anterior" na primeira página). */
.paginacao-btn:disabled {
    background-color: #f8f9fa;
    color: #bdc3c7;
    cursor: not-allowed;
}